(window["webpackJsonpqr-auth-web"]=window["webpackJsonpqr-auth-web"]||[]).push([[7],{301:function(e,t,n){"use strict";n.r(t);n(255);var a=n(275),o=(n(257),n(280)),c=(n(246),n(250)),i=(n(140),n(76)),r=n(103),s=n(104),l=n(106),u=n(105),d=n(107),m=n(0),g=n.n(m),p=n(259),h=n.n(p),f=n(53),C=n(262),E=n.n(C),b=n(30),k=n(54),q=new(n(274).a)({broadcaster:"pusher",key:"ef9bcd4ecd1038dd7de2",cluster:"ap2",forceTLS:!0}),v=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).onClickLogin=function(){var e=h()(),t={client_id:b.a.auth.AUTH_CLIENT_ID,redirect_uri:b.a.auth.REDIRECT_URI,response_type:"code",state:e};localStorage.setItem("state_cuid",e);var n=E.a.stringify(t,{sort:!1,encode:!1}),a="".concat(b.a.BASE_URL,"/oauth/authorize?").concat(n);window.location.href=a},n.loadQrCode=function(){n.setState({loading:!0}),n.props.getQrCode().then((function(e){console.log("in",e),n.setState({qrImg:e.qr_code}),n.setState({loading:!1}),q.channel("uniqueCode.".concat(e.channel_id)).listen("UniqueCodeDecode",(function(e){console.log(e.uniqueCode.token.accessToken),Object(k.e)(e.uniqueCode.token),setTimeout((function(){window.location.href="/"}),1e3)}))})).catch((function(e){n.setState({loading:!1})}))},n.state={qrImg:"",loading:!1},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.loadQrCode()}},{key:"leaveAllChannel",value:function(){q.channel("uniqueCode.*").stopListening("UniqueCodeDecode"),q.leaveChannel("uniqueCode.*")}},{key:"render",value:function(){return g.a.createElement("div",{style:{background:"#fff",padding:24,minHeight:380}},g.a.createElement(a.a,{type:"flex",justify:"space-around"},g.a.createElement(o.a,{span:12},g.a.createElement("div",{className:"signup-container"},g.a.createElement("div",{className:"signup-content"},g.a.createElement("h1",{className:"signup-title"},"Auth Option"),g.a.createElement("div",{className:"social-signup",onClick:this.onClickLogin},g.a.createElement("img",{src:"assets/lara_auth.png",alt:"Facebook"}),g.a.createElement("span",null,"Login With Laravel Passport ")),g.a.createElement("div",{className:"or-separator"},g.a.createElement("span",{className:"or-text"},"OR")),g.a.createElement(i.a,{type:"primary",onClick:this.loadQrCode},"Get Code"),g.a.createElement("br",null),g.a.createElement("br",null),g.a.createElement(c.a,{tip:"Loading...",spinning:this.state.loading},this.state.qrImg&&g.a.createElement("div",{className:"qr-code"},g.a.createElement("img",{alt:"qr-code",src:"data:image/jpeg;base64,".concat(this.state.qrImg)}))))))))}}]),t}(m.Component);t.default=Object(f.connect)((function(e){return{user:e.user}}),(function(e,t){return{getQrCode:function(t){return e(Object(k.a)())},loadToken:function(t){return e(Object(k.d)(t))}}}))(v)}}]);
//# sourceMappingURL=7.7ab1c503.chunk.js.map